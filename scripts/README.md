# Scripts
This README describes the common usage pattern for the included scripts, and a description of each file.

## Quick-Start
`./scripts/setup.sh`
`./scripts/run.sh`

## Common Usage
**TODO: The below-text is currently lifted from the main README and will shortly be out of date as the scripts are updated**
Bootstrap DL Lite scenarios with `./scripts/bootstrap.sh <folder> dllite [data]` - add data if you also want to generate the data
Bootstrap ChaseBench scenarios with `./scripts/bootstrap.sh <folder> chasebench`
`setup.sh` is used to automate the bootstrapping of multiple scenarios - edit it as you need.
Within the `bootstrap.sh` script, you will need to change the SIZES list to match which data sizes you wish to generate.
The `generate.sh` script automates data generation - use `./scripts/generate.sh <folder> <size>` where 'folder' is the top level scenario name and 'size' is a data size defined in the `config.ini` in `tools/datagenerator`
`build.sh` drops a database if exists, then creates and imports - use `./scripts/build.sh <folder> <size>` where 'folder' is the top level scenario name and 'size' is a data size defined in the data folder of that scenario. The database information is taken from the scenario config.ini file
`query.sh` is the main heavy lifter of the scripts, and runs a test of a query on each tool, 6 times. It is invoked using `./scripts/query.sh <folder> <query number> <size>`, where 'folder' is the top level scenario name, query number is self explanatory and 'size' is a data size defined in the data folder of that scenario. Below will be a guide to modifying this script to expand it to more tools.
Most of these commands are automated using the `run.sh` script. At the moment, the parameters of the test have to be changed in the script itself, but this could be changed to take command line arguments

## Files

### bootstrap.sh

#### NAME

`bootstrap` \- a bootstrapper for initialising ForBackBench

#### SYNOPSIS

bootstrap <*base_dir*> <**chasebench**|**dllite**> <**data|none**> <**GAV|LAV**>

**TODO: Be aware that if the "data" variable is not used (i.e., not replaced with a dummy like "none"), the GAV or LAV variable will fail**

#### DESCRIPTION

This script initialises the necessary data for the benchmarking scenarios, using the collection of utility tools to generate (and, where necessary, convert) data suitable to be used for forward- and backward-chaining approached to query resolution.


### build.sh

#### NAME

`build` \- builds the database(s) for ForBackBench scenarios

#### SYNOPSIS

build <*base_dir*> <**small|medium|large**>

#### DESCRIPTION

This script uses the csv files (generated by `generate.sh`) to build a database and associated 


### csvToGraph.py

**TODO: Not called directly?**


### fix.sh
**TODO: a regex that presumably renames some filenames or *something*, but not obvious what calls it. May have been a one-time use? Otherwise can be folded into whatever script supposedly calls it**


### generate.sh
**TODO: two line helper function; could be rolled into whichever scripts call it? (e.g. bootstrap.sh)**



### GQRstTgdsGenerator.sh

#### NAME

`GQRstTgdsGenerator` \- generates st-TGDs for GQR

#### SYNOPSIS


#### DESCRIPTION



### queryGAVMapping.sh

#### NAME

`queryGAVMapping` \- runs a ForBackBench benchmarking scenario using all of the tools

#### SYNOPSIS

queryGAVMapping <*base_dir*> <*query*> <**small|medium|large**>

#### DESCRIPTION
Runs a benchmark of the specified query (of the specified size) on GAV Mappings across the following systems:
* Rapid
* Iqaros
* GRAAL
* RDFox
* Ontop
* Ontop RW
* Rulewerk



### queryLAVMapping.sh

#### NAME

`queryLAVMapping` \- runs a ForBackBench benchmarking scenario using all of the tools

#### SYNOPSIS

queryLAVMapping <*base_dir*> <*query*> <**small|medium|large**>

#### DESCRIPTION
Runs a benchmark of the specified query (of the specified size) on LAV Mappings across the following systems:
* Rapid
* Iqaros
* GRAAL
* RDFox (Original)
* RDFox (w/ Long st-tgds)
* Ontop RW
* BCA GQR
* Rulewerk (Original)
* Rulewerk (w/ Long st-tgds)



### queryTrivialMapping.sh

#### NAME

`queryTrivialMapping` \- runs a ForBackBench benchmarking scenario using all of the tools

#### SYNOPSIS

queryTrivialMapping <*base_dir*> <*query*> <**small|medium|large**>

#### DESCRIPTION
Runs a benchmark of the specified query (of the specified size) on Trivial Mappings across the following systems:
* Rapid
* Iqaros
* GRAAL
* RDFox
* Ontop
* Ontop RW
* Rulewerk



### run.sh

**TODO: This section is mostly applicable to all three run scripts**

#### NAME

`run` \- runs the ForBackBench benchmarking process across a number of queries

#### SYNOPSIS

`run`

**TODO: These scripts currently uses fixed parameters (e.g. size). Could/should be rewritten to include (optional) command line arguments**

#### DESCRIPTION

**TODO: `for ((i=1;i<=1;++i)); do` bugged?**

**TODO: run.sh scripts could be consolidated into single script**

This script automates the running of `query.sh`.

To add scenarios this script it is currently (**TODO**) necessary to expand the internal `SCENARIOS` array (e.g. `SCENARIOS=("scenarios/<SCENARIO NAME>" "scenarios/<SCENARIO NAME>")`).

To add test data sizes do the same but with the `SIZES` array to become something like `SIZES=("small" "medium")`.

The run the Deep scenario, `SIZES` must be set to `SIZES=("deep")`
